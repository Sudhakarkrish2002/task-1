/**
 * Enhanced Grid Drag & Drop CSS
 * Optimized for full-width scalable drag-and-drop across entire dashboard
 */

/* ===== Full-Width Drop Zone ===== */
.enhanced-grid-layout {
  position: relative;
  width: 100%;
  min-height: 100vh;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
}

/* Drag-over state with full-width coverage */
.enhanced-grid-layout.drag-over {
  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
  transition: background 0.3s ease;
}

/* Full-width grid background pattern */
.enhanced-grid-layout::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    repeating-linear-gradient(
      0deg,
      rgba(203, 213, 225, 0.3) 0px,
      rgba(203, 213, 225, 0.3) 1px,
      transparent 1px,
      transparent 72px /* rowHeight (60) + margin (12) */
    ),
    repeating-linear-gradient(
      90deg,
      rgba(203, 213, 225, 0.3) 0px,
      rgba(203, 213, 225, 0.3) 1px,
      transparent 1px,
      transparent calc((100% - 13 * 12px) / 12) /* Dynamic column width */
    );
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1;
}

/* Show grid when dragging */
.enhanced-grid-layout.drag-over::before {
  opacity: 1;
}

/* Enhanced active drag state */
.enhanced-grid-layout.drag-active::before {
  opacity: 1;
  background-image: 
    repeating-linear-gradient(
      0deg,
      rgba(59, 130, 246, 0.2) 0px,
      rgba(59, 130, 246, 0.2) 1px,
      transparent 1px,
      transparent 72px
    ),
    repeating-linear-gradient(
      90deg,
      rgba(59, 130, 246, 0.2) 0px,
      rgba(59, 130, 246, 0.2) 1px,
      transparent 1px,
      transparent calc((100% - 13 * 12px) / 12)
    );
}

/* ===== Drop Indicator - Full Width Support ===== */
.drop-indicator {
  position: absolute;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.15) 100%);
  border: 2px dashed rgba(59, 130, 246, 0.6);
  border-radius: 12px;
  pointer-events: none;
  z-index: 1000;
  animation: pulse-drop-indicator 1.5s ease-in-out infinite;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
  transition: all 0.15s ease;
}

@keyframes pulse-drop-indicator {
  0%, 100% {
    transform: scale(1);
    opacity: 0.8;
  }
  50% {
    transform: scale(1.02);
    opacity: 1;
  }
}

/* ===== Right Side Enhancement ===== */
/* Visual feedback for right-side drop zones */
.enhanced-grid-layout .grid-container {
  position: relative;
  width: 100%;
  min-height: 600px;
}

/* Right edge indicator when dragging - makes it clear full width is droppable */
.enhanced-grid-layout.drag-over .grid-container::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  width: 6px;
  background: linear-gradient(180deg, 
    rgba(59, 130, 246, 0.1) 0%,
    rgba(59, 130, 246, 0.6) 50%,
    rgba(59, 130, 246, 0.1) 100%
  );
  animation: edge-pulse 1.5s ease-in-out infinite;
  pointer-events: none;
  z-index: 1000;
  box-shadow: -2px 0 10px rgba(59, 130, 246, 0.3);
}

/* Left edge indicator for symmetry */
.enhanced-grid-layout.drag-over .grid-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  width: 6px;
  background: linear-gradient(180deg, 
    rgba(59, 130, 246, 0.1) 0%,
    rgba(59, 130, 246, 0.6) 50%,
    rgba(59, 130, 246, 0.1) 100%
  );
  animation: edge-pulse 1.5s ease-in-out infinite reverse;
  pointer-events: none;
  z-index: 1000;
  box-shadow: 2px 0 10px rgba(59, 130, 246, 0.3);
}

@keyframes edge-pulse {
  0%, 100% {
    opacity: 0.4;
    transform: scaleX(1);
  }
  50% {
    opacity: 1;
    transform: scaleX(1.8);
  }
}

/* ===== Widget Styles - Scalable ===== */
.react-grid-item {
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  background: white;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  border: 1px solid rgba(0, 0, 0, 0.05);
  overflow: visible;
}

.react-grid-item:hover {
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
  border-color: rgba(59, 130, 246, 0.2);
  transform: translateY(-1px);
  z-index: 10;
}

/* Dragging state */
.react-grid-item.react-draggable-dragging {
  box-shadow: 
    0 20px 25px -5px rgba(59, 130, 246, 0.2),
    0 10px 10px -5px rgba(59, 130, 246, 0.1);
  transform: scale(1.03) rotate(1deg);
  z-index: 1000 !important;
  opacity: 0.95;
  border-color: rgba(59, 130, 246, 0.6);
  cursor: grabbing !important;
}

/* Resizing state */
.react-grid-item.resizing {
  opacity: 0.9;
  box-shadow: 0 10px 15px rgba(34, 197, 94, 0.2);
  border-color: rgba(34, 197, 94, 0.5);
}

/* ===== Resize Handles - Enhanced ===== */
.react-resizable-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background: rgba(59, 130, 246, 0.9);
  border-radius: 50%;
  opacity: 0;
  transition: all 0.2s ease;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
  z-index: 100;
}

.react-grid-item:hover .react-resizable-handle {
  opacity: 1;
}

.react-resizable-handle:hover {
  background: rgba(59, 130, 246, 1);
  transform: scale(1.2);
  box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
}

.react-resizable-handle-se {
  bottom: -8px;
  right: -8px;
  cursor: se-resize;
}

.react-resizable-handle-sw {
  bottom: -8px;
  left: -8px;
  cursor: sw-resize;
}

.react-resizable-handle-ne {
  top: -8px;
  right: -8px;
  cursor: ne-resize;
}

.react-resizable-handle-nw {
  top: -8px;
  left: -8px;
  cursor: nw-resize;
}

/* ===== Placeholder - Enhanced ===== */
.react-grid-placeholder {
  background: linear-gradient(135deg, 
    rgba(59, 130, 246, 0.2) 0%, 
    rgba(37, 99, 235, 0.2) 100%) !important;
  border: 2px dashed rgba(59, 130, 246, 0.6) !important;
  border-radius: 12px !important;
  opacity: 1 !important;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;
  z-index: 2 !important;
  animation: pulse-placeholder 1.5s ease-in-out infinite;
}

@keyframes pulse-placeholder {
  0%, 100% {
    transform: scale(1);
    background: rgba(59, 130, 246, 0.15);
  }
  50% {
    transform: scale(1.01);
    background: rgba(59, 130, 246, 0.25);
  }
}

/* ===== Responsive Breakpoints ===== */

/* Extra Large (1920px+) - 4K displays */
@media (min-width: 1920px) {
  .enhanced-grid-layout {
    max-width: none;
    width: 100%;
  }
  
  .react-grid-item {
    border-radius: 16px;
  }
  
  .react-resizable-handle {
    width: 24px;
    height: 24px;
  }
  
  .enhanced-grid-layout::before {
    background-size: 
      100% 80px,
      calc((100% - 13 * 12px) / 12) 100%;
  }
  
  .drop-indicator {
    border-width: 3px;
    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);
  }
}

/* Ultra-wide and 4K displays (2560px+) */
@media (min-width: 2560px) {
  .enhanced-grid-layout {
    max-width: none;
    width: 100%;
  }
  
  .react-grid-item {
    border-radius: 18px;
  }
  
  .react-resizable-handle {
    width: 28px;
    height: 28px;
  }
  
  .enhanced-grid-layout::before {
    background-size: 
      100% 90px,
      calc((100% - 13 * 12px) / 12) 100%;
  }
  
  .drop-indicator {
    border-width: 4px;
    box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
  }
  
  /* Enhanced right-edge visual feedback for ultra-wide screens */
  .enhanced-grid-layout.drag-over .grid-container::after {
    width: 8px;
    box-shadow: -3px 0 15px rgba(59, 130, 246, 0.4);
  }
  
  .enhanced-grid-layout.drag-over .grid-container::before {
    width: 8px;
    box-shadow: 3px 0 15px rgba(59, 130, 246, 0.4);
  }
}

/* Large (1200px-1919px) - Standard desktops including 21-inch monitors */
@media (min-width: 1200px) and (max-width: 1919px) {
  .enhanced-grid-layout {
    max-width: none;
    width: 100%;
  }
  
  .enhanced-grid-layout::before {
    background-size: 
      100% 72px,
      calc((100% - 13 * 12px) / 12) 100%;
  }
  
  .drop-indicator {
    border-width: 2px;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
  }
  
  /* Enhanced visual feedback for right-edge drops on large monitors */
  .enhanced-grid-layout.drag-over .grid-container::after {
    width: 6px;
    box-shadow: -2px 0 12px rgba(59, 130, 246, 0.35);
  }
  
  .enhanced-grid-layout.drag-over .grid-container::before {
    width: 6px;
    box-shadow: 2px 0 12px rgba(59, 130, 246, 0.35);
  }
}

/* Medium (996px-1199px) - Tablets landscape */
@media (min-width: 996px) and (max-width: 1199px) {
  .react-grid-item {
    border-radius: 10px;
  }
  
  .enhanced-grid-layout::before {
    background-size: 
      100% 68px,
      calc((100% - 11 * 12px) / 10) 100%;
  }
}

/* Small (768px-995px) - Tablets portrait */
@media (min-width: 768px) and (max-width: 995px) {
  .react-grid-item {
    border-radius: 8px;
  }
  
  .react-resizable-handle {
    width: 24px;
    height: 24px;
  }
  
  .enhanced-grid-layout::before {
    background-size: 
      100% 64px,
      calc((100% - 7 * 12px) / 6) 100%;
  }
}

/* Extra Small (< 768px) - Mobile */
@media (max-width: 767px) {
  .react-grid-item {
    border-radius: 8px;
  }
  
  .react-resizable-handle {
    display: none;
  }
  
  .enhanced-grid-layout::before {
    display: none;
  }
}

/* ===== Performance Optimizations ===== */
.react-grid-item {
  will-change: transform;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* ===== Drag Overlay ===== */
.drag-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(59, 130, 246, 0.02);
  pointer-events: none;
  z-index: 999;
  animation: fade-in 0.2s ease;
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ===== Accessibility ===== */
.react-grid-item:focus-visible {
  outline: 2px solid rgba(59, 130, 246, 0.8);
  outline-offset: 2px;
  z-index: 100;
}

/* ===== Touch Feedback for Tablets ===== */
@media (hover: none) and (pointer: coarse) {
  .react-grid-item:active {
    background-color: rgba(59, 130, 246, 0.05);
    transform: scale(0.98);
  }
  
  .react-resizable-handle {
    width: 28px;
    height: 28px;
  }
}

